<div class="z-portlet portlet-imagerotator"
     i18n:domain="zojax.portlets.imagerotator"
     tal:define="cssClass string:z-portlet portlet-htmlsource"
     tal:attributes="class python:context.cssClass and cssClass + ' ' + context.cssClass
                                  or cssClass"
     tal:condition="context/decoration">
  
  <h2 class="z-portlet-header"
      tal:condition="context/label" tal:content="context/label">Portlet Header</h2>

  <div class="z-portlet-body">
    <div class="z-portlet-item">
      <metal:block use-macro="view/template/macros/rotator" />
    </div>
  </div>
</div>

<tal:block condition="not: context/decoration">
  <metal:block use-macro="view/template/macros/rotator" />
</tal:block>

<tal:block condition="nothing">
  <metal:block define-macro="rotator">
    <div class="imagerotator-container">
      <ul class="banners">
        <li class="banner-item" tal:repeat="image context/images">
          <span class="item-text"><div tal:content="structure image/text/cooked">text1</div></span>
          <img tal:attributes="src string:${context/url}/images/${repeat/image/number}/++attribute++image; alt image/title"
               class="item-image" />
        </li>
      </ul>
      <div class="thumbs">
        <a tal:repeat="image context/images" href="#" tal:attributes="rel repeat/image/number"><img tal:attributes="src string:${context/url}/images/${repeat/image/number}/++attribute++thumbnail; alt image/title" /></a>
      </div>
      <div tal:condition="context/buttons"
           class="buttons">
        <ul>
          <li tal:repeat="button context/buttons">
            <a tal:attributes="href button/url" target="blank_" class="buttons-item"
               tal:content="button/title">Title</a>
            <div class="buttons-block">
              <img tal:attributes="src string:${context/url}/buttons/${repeat/button/number}/++attribute++image;
                                   alt button/title"
                   src="quickstat_files/attributeimage.jpeg" alt="1" width="230px;" />
              <span tal:content="button/title">Title</span>
              <p tal:content="structure button/text/cooked">text</p>
              <a tal:attributes="href button/url" target="blank_">&raquo; Learn more...</a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </metal:block>
</tal:block>